'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var ethers = require('ethers');
var rpcs = require('../../../dist/rpcs-9c4eb960.cjs.dev.js');

function alchemyProvider() {
  let {
    alchemyId = rpcs.defaultAlchemyId,
    pollingInterval,
    priority,
    stallTimeout,
    weight
  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return function (chain) {
    if (!chain.rpcUrls.alchemy) return null;
    return {
      chain: { ...chain,
        rpcUrls: { ...chain.rpcUrls,
          default: "".concat(chain.rpcUrls.alchemy, "/").concat(alchemyId)
        }
      },
      provider: () => {
        const provider = new ethers.providers.AlchemyProvider(chain.id, alchemyId);
        if (pollingInterval) provider.pollingInterval = pollingInterval;
        return Object.assign(provider, {
          priority,
          stallTimeout,
          weight
        });
      },
      webSocketProvider: () => new ethers.providers.AlchemyWebSocketProvider(chain.id, alchemyId)
    };
  };
}

exports.alchemyProvider = alchemyProvider;
