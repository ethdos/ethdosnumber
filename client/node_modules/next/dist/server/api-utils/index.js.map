{"version":3,"sources":["../../../server/api-utils/index.ts"],"names":["getCookieParser","sendStatusCode","redirect","checkIsManualRevalidate","clearPreviewData","sendError","setLazyProp","headers","parseCookie","header","cookie","parse","parseCookieFn","require","Array","isArray","join","res","statusCode","statusOrUrl","url","Error","writeHead","Location","write","end","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","req","previewProps","isManualRevalidate","previewModeId","revalidateOnlyGenerated","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","Symbol","SYMBOL_CLEARED_COOKIES","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","Object","defineProperty","value","enumerable","ApiError","message","statusMessage","prop","getter","opts","configurable","optsReset","writable","get","set"],"mappings":"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"}