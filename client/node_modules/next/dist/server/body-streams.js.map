{"version":3,"sources":["../../server/body-streams.ts"],"names":["clonableBodyForRequest","requestToBodyStream","request","transform","TransformStream","start","controller","on","chunk","enqueue","terminate","err","error","readable","bodyStreamToNodeStream","bodyStream","reader","getReader","Readable","from","done","value","read","replaceRequestBody","base","stream","key","v","bind","incomingMessage","bufferedBodyStream","endPromise","Promise","resolve","reject","finalize","cloneBodyStream","originalStream","stream1","stream2","tee"],"mappings":"Y;;;E;QAuDgBA,sBAAsB,GAAtBA,sBAAsB,A;AAtDb,GAAQ,CAAR,OAAQ;AACD,GAAyC,CAAzC,mBAAyC;AAIzE,EAEG,AAFH;;CAEG,AAFH,EAEG,UACMC,mBAAmB,CAACC,OAAwB,EAAc,CAAC;IAClE,KAAK,CAACC,SAAS,GAAG,GAAG,CAACC,mBAAe,iBAAyB,CAAC;QAC7DC,KAAK,EAACC,UAAU,EAAE,CAAC;YACjBJ,OAAO,CAACK,EAAE,CAAC,CAAM,QAAGC,KAAK,GAAKF,UAAU,CAACG,OAAO,CAACD,KAAK;a;YACtDN,OAAO,CAACK,EAAE,CAAC,CAAK,UAAQD,UAAU,CAACI,SAAS;a;YAC5CR,OAAO,CAACK,EAAE,CAAC,CAAO,SAAGI,GAAG,GAAKL,UAAU,CAACM,KAAK,CAACD,GAAG;a;QACnD,CAAC;IACH,CAAC;IAED,MAAM,CAACR,SAAS,CAACU,QAAQ;AAC3B,CAAC;SAEQC,sBAAsB,CAACC,UAAsB,EAAY,CAAC;IACjE,KAAK,CAACC,MAAM,GAAGD,UAAU,CAACE,SAAS;IACnC,MAAM,CAACC,OAAQ,UAACC,IAAI,mBACE,CAAC;cACZ,IAAI,CAAE,CAAC;YACZ,KAAK,CAAC,CAAC,CAACC,IAAI,GAAEC,KAAK,EAAC,CAAC,GAAG,KAAK,CAACL,MAAM,CAACM,IAAI;YACzC,EAAE,EAAEF,IAAI,EAAE,CAAC;gBACT,MAAM;YACR,CAAC;kBACKC,KAAK,A;QACb,CAAC;IACH,CAAC;AAEL,CAAC;SAEQE,kBAAkB,CACzBC,IAAO,EACPC,MAAgB,EACb,CAAC;IACJ,GAAG,CAAE,KAAK,CAACC,GAAG,IAAID,MAAM,CAAE,CAAC;QACzB,GAAG,CAACE,CAAC,GAAGF,MAAM,CAACC,GAAG;QAClB,EAAE,EAAE,MAAM,CAACC,CAAC,KAAK,CAAU,WAAE,CAAC;YAC5BA,CAAC,GAAGA,CAAC,CAACC,IAAI,CAACH,MAAM,C;QACnB,CAAC;QACDD,IAAI,CAACE,GAAG,IAAeC,CAAC,A;IAC1B,CAAC;IAED,MAAM,CAACH,IAAI;AACb,CAAC;SAMexB,sBAAsB,CACpC6B,eAAkB,EAClB,CAAC;IACD,GAAG,CAACC,kBAAkB,GAAsB,IAAI;IAEhD,KAAK,CAACC,UAAU,GAAG,GAAG,CAACC,OAAO,EAAEC,OAAO,EAAEC,MAAM,GAAK,CAAC;QACnDL,eAAe,CAACtB,EAAE,CAAC,CAAK,MAAE0B,OAAO,C;QACjCJ,eAAe,CAACtB,EAAE,CAAC,CAAO,QAAE2B,MAAM,C;IACpC,CAAC;IAED,MAAM,CAAC,CAAC;QACN,EAIG,AAJH;;;;KAIG,AAJH,EAIG,OACGC,QAAQ,IAAkB,CAAC;YAC/B,EAAE,EAAEL,kBAAkB,EAAE,CAAC;gBACvB,KAAK,CAACC,UAAU,A;gBAChBR,kBAAkB,CAChBM,eAAe,EACff,sBAAsB,CAACgB,kBAAkB,E;YAE7C,CAAC;QACH,CAAC;QACD,EAGG,AAHH;;;KAGG,AAHH,EAGG,CACHM,eAAe,IAAe,CAAC;YAC7B,KAAK,CAACC,cAAc,GAClBP,kBAAkB,aAAlBA,kBAAkB,cAAlBA,kBAAkB,GAAI7B,mBAAmB,CAAC4B,eAAe;YAC3D,KAAK,EAAES,OAAO,EAAEC,OAAO,IAAIF,cAAc,CAACG,GAAG;YAC7CV,kBAAkB,GAAGQ,OAAO,A;YAC5B,MAAM,CAACC,OAAO;QAChB,CAAC;IACH,CAAC;AACH,CAAC"}