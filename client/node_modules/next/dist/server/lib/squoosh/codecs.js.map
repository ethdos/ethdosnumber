{"version":3,"sources":["../../../../server/lib/squoosh/codecs.ts"],"names":["path","pngEncDec","oxipng","resize","mozEncWasm","resolve","__dirname","mozDecWasm","webpEncWasm","webpDecWasm","avifEncWasm","avifDecWasm","pngEncDecWasm","pngEncDecInit","default","fsp","readFile","pathify","oxipngWasm","oxipngInit","resizeWasm","resizeInit","rotateWasm","global","ImageData","resizeNameToIndex","name","Error","resizeWithAspect","input_width","input_height","target_width","target_height","width","height","Math","round","preprocessors","description","instantiate","buffer","method","premultiply","linearRGB","imageData","cleanup","defaultOptions","fitMethod","rotate","numRotations","degrees","sameDimensions","size","instance","WebAssembly","memory","exports","additionalPagesNeeded","ceil","byteLength","grow","view","Uint8ClampedArray","set","slice","codecs","mozjpeg","extension","detectors","dec","instantiateEmscriptenWasm","mozDec","enc","mozEnc","defaultEncoderOptions","quality","baseline","arithmetic","progressive","optimize_coding","smoothing","color_space","quant_table","trellis_multipass","trellis_opt_zero","trellis_opt_table","trellis_loops","auto_subsample","chroma_subsample","separate_chroma_quality","chroma_quality","autoOptimize","option","min","max","webp","webpDec","webpEnc","target_size","target_PSNR","sns_strength","filter_strength","filter_sharpness","filter_type","partitions","segments","pass","show_compressed","preprocessing","autofilter","partition_limit","alpha_compression","alpha_filtering","alpha_quality","lossless","exact","image_hint","emulate_jpeg_size","thread_level","low_memory","near_lossless","use_delta_palette","use_sharp_yuv","avif","avifDec","avifEnc","cqLevel","cqAlphaLevel","denoiseLevel","tileColsLog2","tileRowsLog2","speed","subsample","chromaDeltaQ","sharpness","tune","decode","encode","opts","simplePng","Uint8Array","optimise","level"],"mappings":"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"}