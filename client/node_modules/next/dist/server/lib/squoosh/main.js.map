{"version":3,"sources":["../../../../server/lib/squoosh/main.ts"],"names":["processBuffer","decodeBuffer","path","getWorker","execOnce","Worker","resolve","__dirname","enableWorkerThreads","numWorkers","Math","max","min","cpus","length","computeWorkerKey","method","buffer","operations","encoding","quality","worker","imageData","operation","type","rotate","numRotations","width","resize","image","height","Buffer","from","encodeJpeg","encodeWebp","avifQuality","encodeAvif","encodePng","Error"],"mappings":"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"}