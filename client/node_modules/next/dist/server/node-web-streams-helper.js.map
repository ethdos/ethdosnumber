{"version":3,"sources":["../../server/node-web-streams-helper.ts"],"names":["readableStreamTee","chainStreams","streamFromArray","streamToString","encodeText","decodeText","createBufferedTransformStream","createFlushEffectStream","renderToInitialStream","continueFromInitialStream","renderToStream","createSuffixStream","createPrefixStream","createInlineDataStream","readable","transformStream","TransformStream","transformStream2","writer","writable","getWriter","writer2","reader","getReader","read","then","done","value","close","write","streams","promise","Promise","resolve","i","length","pipeTo","preventClose","strings","forEach","str","stream","textDecoder","TextDecoder","bufferedString","input","TextEncoder","encode","decode","pendingFlush","flushBuffer","controller","setTimeout","enqueue","transform","chunk","flush","handleFlushEffect","flushedChunk","ReactDOMServer","element","renderToReadableStream","suffix","dataStream","generateStaticHTML","flushEffectHandler","renderStream","closeTag","suffixUnclosed","split","allReady","transforms","filter","nonNullable","reduce","pipeThrough","prefix","prefixFlushed","prefixPrefixFlushFinished","res","dataStreamFinished","dataStreamReader","err","error"],"mappings":"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"}