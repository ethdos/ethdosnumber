{"version":3,"sources":["../../server/server-route-utils.ts"],"names":["getCustomRoute","type","rule","restrictedRedirectPaths","match","getPathMatch","source","strict","removeUnnamedParams","regexModifier","internal","regex","modifyRouteRegex","undefined","name","fn","_req","_res","_params","_parsedUrl","finished","createHeaderRoute","headerRoute","has","res","params","hasParams","Object","keys","length","header","headers","key","value","compileNonPath","setHeader","createRedirectRoute","redirectRoute","statusCode","req","parsedUrl","parsedDestination","prepareDestination","appendParamsToQuery","destination","query","search","stringifyQuery","updatedDestination","formatUrl","startsWith","normalizeRepeatedSlashes","redirect","getRedirectStatus","body","send","initialQuery","getRequestMeta","initialQueryValues","values","stringifyQs","encodeURIComponent","some","initialQueryVal","Array","isArray","includes"],"mappings":"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"}