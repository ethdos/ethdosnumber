{"version":3,"sources":["../../server/web-server.ts"],"names":["NextWebServer","BaseServer","options","Object","assign","renderOpts","webServerConfig","extendRenderOpts","generateRewrites","beforeFiles","afterFiles","fallback","handleCompression","getRoutesManifest","headers","rewrites","redirects","getPagePath","getPublicDir","getBuildId","serverOptions","buildId","loadEnvConfig","getHasStaticDir","hasMiddleware","generateImageRoutes","generateStaticRoutes","generateFsStaticRoutes","generatePublicRoutes","getMiddleware","generateCatchAllMiddlewareRoute","undefined","getFontManifest","getMiddlewareManifest","getPagesManifest","page","getFilesystemPaths","Set","getPrerenderManifest","version","routes","dynamicRoutes","notFoundRoutes","preview","previewModeId","previewModeSigningKey","previewModeEncryptionKey","getServerComponentManifest","renderHTML","req","_res","pathname","query","renderToHTML","url","cookies","disableOptimizedLoading","runtime","sendRenderResult","_req","res","setHeader","poweredByHeader","type","getHeader","result","isDynamic","writer","transformStream","writable","getWriter","pipe","write","chunk","end","close","destroy","err","abort","cork","uncork","payload","toUnchunkedString","String","byteLength","generateEtags","generateETag","body","send","runApi","findPageComponents","params","loadComponent","components"],"mappings":"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"}