{"version":3,"sources":["../../../shared/lib/post-process.ts"],"names":["middlewareRegistry","registerPostProcessor","name","middleware","condition","push","processHTML","html","data","options","root","parse","document","callMiddleWare","inspectData","inspect","mutate","i","length","FontOptimizerMiddleware","originalDom","getFontDefinition","fontDefinitions","querySelectorAll","filter","tag","getAttribute","hasAttribute","OPTIMIZED_FONT_PROVIDERS","some","url","dataHref","startsWith","forEach","element","nonce","markup","result","preconnectUrls","Set","fontDef","fallBackLinkTag","indexOf","fontContent","replace","nonceStr","escapedUrl","fontRegex","RegExp","provider","find","p","add","preconnect","preconnectTag","optimizeFonts","process","env","__NEXT_OPTIMIZE_FONTS"],"mappings":"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"}